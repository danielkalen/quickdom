var slice=[].slice;
(function(O){return function(){var x=function(u,n,x,C){C=function(e){return x[e]?n[e]:(x[e]=1,n[e]={},n[e]=u[e](n[e]))};u[1]=function(e){var k={exports:e};(function(){var e=["webkit","moz","ms","o"];var h="backgroundPositionX backgroundPositionY blockSize borderWidth columnRuleWidth cx cy fontSize gridColumnGap gridRowGap height inlineSize lineHeight minBlockSize minHeight minInlineSize minWidth maxHeight maxWidth outlineOffset outlineWidth perspective shapeMargin strokeDashoffset strokeWidth textIndent width wordSpacing top bottom left right x y".split(" ");["margin",
"padding","border","borderRadius"].forEach(function(b){var c;h.push(b);var f=["Top","Bottom","Left","Right"];var E=[];var l=0;for(c=f.length;l<c;l++){var e=f[l];E.push(h.push(b+e))}return E});var b=document.createElement("div").style;var c=/^\d+(?:[a-z]|\%)+$/i;var n=/\d+$/;var A=/\s/;var B={In:function(b,c){return b&&-1!==b.indexOf(c)},isIterable:function(b){return b&&"object"===typeof b&&"number"===typeof b.length&&!b.nodeType},isPropSupported:function(c){return"undefined"!==typeof b[c]},
toTitleCase:function(b){return b[0].toUpperCase()+b.slice(1)},normalizeProperty:function(b){var c,f;if(this.isPropSupported(b))return b;var h=this.toTitleCase(b);b=0;for(c=e.length;b<c;b++)if(f=e[b],f=""+f+h,this.isPropSupported(f))return f},normalizeValue:function(b,e){this.In(h,b)&&null!==e&&(e=""+e,!n.test(e)||c.test(e)||A.test(e)||(e+="px"));return e}};var t=function(b,c,f){var e;if(B.isIterable(b)){var l=0;for(e=b.length;l<e;l++){var F=b[l];t(F,c,f)}}else if("object"===typeof c)for(l in c)f=
c[l],t(b,l,f);else{c=B.normalizeProperty(c);if("undefined"===typeof f)return getComputedStyle(b)[c];c&&(b.style[c]=B.normalizeValue(c,f))}};t.version="1.0.5";return null!=("undefined"!==typeof k&&null!==k?k.exports:void 0)?k.exports=t:"function"===typeof define&&define.amd?define(["quickdom"],function(){return t}):this.Css=t})();return k.exports};u[2]=function(e){var k={exports:e};(function(e){return function(){var e=function(b,c,e,h){h=function(h){return e[h]?c[h]:(e[h]=1,c[h]={},c[h]=b[h](c[h]))};
b[1]=function(b){var c=h(2),e=function(b){var f,c={};for(f in b)c[f]=b[f];return c},p=function(b){var f;if(b){var c={};if("object"!==typeof b)c[b]=!0;else{Array.isArray(b)||(b=Object.keys(b));var e=0;for(f=b.length;e<f;e++)c[b[e]]=!0}return c}},f=function(b){var f=b.target?function(){for(var b=arguments.length,e=-1,l=Array(b);++e<b;)l[e]=arguments[e];return c(f.options,f.options.target,l)}:function(b){for(var e=arguments.length,l=0,h=Array(e);++l<e;)h[l]=arguments[l];return c(f.options,b,h)};f.options=
b;Object.defineProperties(f,z);return f},z={deep:{get:function(){var b=e(this.options);b.deep=!0;return f(b)}},own:{get:function(){var b=e(this.options);b.own=!0;return f(b)}},allowNull:{get:function(){var b=e(this.options);b.allowNull=!0;return f(b)}},nullDeletes:{get:function(){var b=e(this.options);b.nullDeletes=!0;return f(b)}},concat:{get:function(){var b=e(this.options);b.concat=!0;return f(b)}},clone:{get:function(){var b=e(this.options);b.target={};return f(b)}},notDeep:{get:function(){var b=
e(this.options);return function(c){b.notDeep=p(c);return f(b)}}},deepOnly:{get:function(){var b=e(this.options);return function(c){b.deepOnly=p(c);return f(b)}}},keys:{get:function(){var b=e(this.options);return function(c){b.keys=p(c);return f(b)}}},notKeys:{get:function(){var b=e(this.options);return function(c){b.notKeys=p(c);return f(b)}}},transform:{get:function(){var b=e(this.options);return function(c){"function"===typeof c?b.globalTransform=c:c&&"object"===typeof c&&(b.transforms=c);return f(b)}}},
filter:{get:function(){var b=e(this.options);return function(c){"function"===typeof c?b.globalFilter=c:c&&"object"===typeof c&&(b.filters=c);return f(b)}}}};return f({})};b[2]=function(b){var c,e=function(b){return b&&"[object Object]"===Object.prototype.toString.call(b)||Array.isArray(b)},h=function(b,c,e){if(b.deep)return b.notDeep?!b.notDeep[c]:!0;if(b.deepOnly)return b.deepOnly[c]||e&&h(b,e)};return c=function(b,p,l,k){var f,t;if(!p||"object"!==typeof p&&"function"!==typeof p)p={};var n=0;for(t=
l.length;n<t;n++){var v=l[n];if(null!=v)for(f in v){var m=v[f],u=p[f];if(!(m===p||void 0===m||null===m&&!b.allowNull&&!b.nullDeletes||b.keys&&!b.keys[f]||b.notKeys&&b.notKeys[f]||b.own&&!v.hasOwnProperty(f)||b.globalFilter&&!b.globalFilter(m,f,v)||b.filters&&b.filters[f]&&!b.filters[f](m,f,v)))if(null===m&&b.nullDeletes)delete p[f];else switch(b.globalTransform&&(m=b.globalTransform(m,f,v)),b.transforms&&b.transforms[f]&&(m=b.transforms[f](m,f,v)),!1){case !(b.concat&&Array.isArray(m)&&Array.isArray(u)):p[f]=
u.concat(m);break;case !(h(b,f,k)&&e(m)):u=e(u)?u:Array.isArray(m)?[]:{};p[f]=c(b,u,[m],f);break;default:p[f]=m}}}return p}};return h},e=e({},{},{});return function(){var b=e(1);null!=("undefined"!==typeof k&&null!==k?k.exports:void 0)?k.exports=b:"function"===typeof define&&define.amd?define(["smart-extend"],function(){return b}):window.extend=b}()}})(this)();return k.exports};u[22]=function(e){var k;return k=e={De:function(e){return void 0!==e},Ar:function(e){return e instanceof Array},
Ob:function(e){return"object"===typeof e&&e},objectPlain:function(e){return k.Ob(e)&&"[object Object]"===Object.prototype.toString.call(e)},St:function(e){return"string"===typeof e},Nu:function(e){return"number"===typeof e},"function":function(e){return"function"===typeof e},iT:function(e){return k.Ob(e)&&k.Nu(e.length)}}};return C};x=x({},{},{});return function(){var u,n,I;var C=x(1);var e=x(2);var k="id name type href selected checked className".split(" ");var p="id ref type name text style class className url href selected checked props attrs passStateToChildren stateTriggers".split(" ");
var h={In:function(a,d){return a&&-1!==a.indexOf(d)},R:function(a,d){var b=a.indexOf(d);-1!==b&&a.splice(b,1);return a},N:function(a){switch(!1){case !b.dN(a):return f(a);case !b.St(a):return f.text(a);default:return a}},isStateStyle:function(a){return"$"===a[0]||"@"===a[0]}};var b=x(22);b=e.clone(b,{domDoc:function(a){return a&&9===a.nodeType},dE:function(a){return a&&1===a.nodeType},dT:function(a){return a&&3===a.nodeType},dN:function(a){return b.dE(a)||
b.dT(a)},qE:function(a){return a&&"QuickElement"===a.constructor.name},template:function(a){return a&&"QuickTemplate"===a.constructor.name}});var c=function(){function a(a,b){this.type=a;this.options=b;this.el=this.options.existing||("text"===this.type?document.createTextNode(this.options.text):"*"===this.type[0]?document.createElementNS("http://www.w3.org/2000/svg",this.type.slice(1)):document.createElement(this.type));"text"===this.type&&(this.append=this.prepend=this.attr=function(){});
this._p=null;this._s=[];this._c=[];this._i=[];this._e={_R:{}};this._n();this._a();this._ae();this._pp();this.el._quickElement=this}a.prototype.toJSON=function(){var a;var b=[this.type,e.clone.keys(p)(this.options)];var q=this.children;var c=0;for(a=q.length;c<a;c++){var f=q[c];b.push(f.toJSON())}return b};return a}();null==c.name&&(c.name="QuickElement");Object.defineProperties(c.prototype,{raw:{get:function(){return this.el}},
0:{get:function(){return this.el}},css:{get:function(){return this.style}},replaceWith:{get:function(){return this.replace}}});c.prototype.parentsUntil=function(a){return J(this,a)};c.prototype.parentMatching=function(a){var d;if(b["function"](a))for(d=this.parent;d;){if(a(d))return d;d=d.parent}};Object.defineProperties(c.prototype,{children:{get:function(){var a;if(this.el.childNodes.length!==this._c.length){this._c.length=0;var d=this.el.childNodes;var b=0;for(a=d.length;b<a;b++){var q=
d[b];4>q.nodeType&&this._c.push(f(q))}}return this._c}},parent:{get:function(){this._p&&this._p.el===this.el.parentNode||b.domDoc(this.el.parentNode)||(this._p=f(this.el.parentNode));return this._p}},parents:{get:function(){return J(this)}},next:{get:function(){return f(this.el.nextSibling)}},prev:{get:function(){return f(this.el.previousSibling)}},nextAll:{get:function(){var a;var d=[];for(a=f(this.el.nextSibling);a;)d.push(a),a=a.next;return d}},prevAll:{get:function(){var a;
var d=[];for(a=f(this.el.previousSibling);a;)d.push(a),a=a.prev;return d}},siblings:{get:function(){return this.prevAll.reverse().concat(this.nextAll)}},child:{get:function(){return this._C||A(this)}},childf:{get:function(){return A(this,!0)}}});var J=function(a,d){var g;b["function"](d)||(d=void 0);var q=[];for(g=a.parent;g;)q.push(g),g=g.parent,d&&d(g)&&(g=null);return q};var A=function(a,d){if(d||!a._C)a._C={};var b=a._C;a.ref&&(b[a.ref]=a);b=a.children;b.length&&
e.apply(null,[a._C].concat(slice.call(b.map(function(a){return A(a,d)}))));return a._C};c.prototype._n=function(){var a;null==(a=this.options).style&&(a.style={});this.options.sS={};this.options["class"]&&(this.options.className=this.options["class"]);this.options.url&&(this.options.href=this.options.url);null==(a=this.options).relatedInstance&&(a.relatedInstance=this);null==(a=this.options).unpassableStates&&(a.unpassableStates=[]);null==(a=this.options).passStateToChildren&&
(a.passStateToChildren=!0);this.options.stateTriggers=e.deep({hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focus",off:"blur"}},this.options.stateTriggers);this._ns()};c.prototype._ns=function(){var a=Object.keys(this.options.style);var b=a.filter(function(a){return h.isStateStyle(a)});var g=h.R(b.slice(),"$base");this._m=b.filter(function(a){return"@"===a[0]});this._ps=b.map(function(a){return a.slice(1)});!h.In(b,"$base")&&a.length&&
(this.options=e.clone(this.options),b.length?(a=a.filter(function(a){return!h.isStateStyle(a)}),this.options.style.$base=e.clone.keys(a)(this.options.style)):this.options.style={$base:this.options.style});var q=function(a){return function(b,d){var g;var c=Object.keys(b).filter(function(a){return h.isStateStyle(a)});if(c.length){a.hS=!0;null==a._sShared&&(a._sShared=[]);var e=0;for(g=c.length;e<g;e++){var f=c[e];var K=d.concat(f.slice(1));var r=K.join("+");a.options.sS[r]=
a.options.style["$"+r]=b[f];q(b[f],K);delete b[f]}}}}(this);a=0;for(b=g.length;a<b;a++){var c=g[a];q(this.options.style[c],[c.slice(1)])}};c.prototype._a=function(){var a,b;(b=this.options.id||this.options.ref)&&this.attr("data-ref",this.ref=b);this.options.id&&(this.el.id=this.options.id);this.options.className&&(this.el.className=this.options.className);this.options.src&&(this.el.src=this.options.src);this.options.href&&(this.el.href=this.options.href);this.options.type&&(this.el.type=
this.options.type);this.options.name&&(this.el.name=this.options.name);this.options.value&&(this.el.value=this.options.value);this.options.selected&&(this.el.selected=this.options.selected);this.options.checked&&(this.el.checked=this.options.checked);if(this.options.props){var g=this.options.props;for(a in g)b=g[a],this.prop(a,b)}if(this.options.attrs)for(a in g=this.options.attrs,g)b=g[a],this.attr(a,b);this.options.styleAfterInsert||this.style(this.options.style.$base);this.onInserted(function(a){return function(){a.options.styleAfterInsert&&
a.style(e.clone.apply(e,[a.options.style.$base].concat(slice.call(a._ss(a._as())))));var b=a._I=a;var d=a._m;if(d.length)return a._m=new function(){var a;var g=0;for(a=d.length;g<a;g++){var c=d[g];c=c.slice(1);this[c]=E.rg(b,c)}return this}}}(this))};c.prototype._ae=function(){var a;var d=this.options.stateTriggers;var g=function(a){return function(d,g){var c=b.St(g)?g:g.on;if(b.Ob(g))var q=g.off;a._l(c,function(){return a.state(d,
!0)});if(q)return a._l(q,function(){return a.state(d,!1)})}}(this);for(a in d){var c=d[a];g(a,c)}};c.prototype._pp=function(){var a=void 0;return Object.defineProperty(this,"_p",{get:function(){return a},set:function(b){if(a=b){var d=this.parents.slice(-1)[0];if(d.raw===document.documentElement)this._up(b);else a.onInserted(function(d){return function(){if(a===b)return d._up(b)}}(this))}}})};c.prototype._up=function(a){var b;delete this._p;
this._p=a;var g=this._i;var c=0;for(b=g.length;c<b;c++)a=g[c],a(this)};var B=/\s+/;c.prototype.on=function(a,d){if(b.St(a)&&b["function"](d)){var g=a.split(".");var c=g[1];a=g[0];a.split(B).forEach(function(a){return function(b){a._e[b]||(a._e[b]=[],a._l(b,function(d){var c;var g=a._e[b];var q=0;for(c=g.length;q<c;q++){var e=g[q];e.call(a.el,d)}}));c&&(a._e._R[c]=d);return a._e[b].push(d)}}(this))}return this};
c.prototype.off=function(a,d){if(b.St(a)){var c=a.split(".");var q=c[1];a=c[0];a.split(B).forEach(function(a){return function(c){if(a._e[c]){null==d&&(d=a._e._R[q]);if(b["function"](d))return h.R(a._e[c],d);if(!q)return a._e[c].length=0}}}(this))}else for(c in this._e)this.off(c);return this};c.prototype.emit=function(a,d,c){null==d&&(d=!0);null==c&&(c=!0);if(a&&b.St(a)){var g=document.createEvent("Event");g.initEvent(a,
d,c);this.el.dispatchEvent(g)}return this};c.prototype.onInserted=function(a,d){null==d&&(d=!0);if(b["function"](a))return this._I?d&&a(this):this._i.push(a),this};c.prototype._l=function(a,b){this.el[this.el.addEventListener?"addEventListener":"attachEvent"](this.el.addEventListener?a:"on"+a,b);return this};c.prototype.updateOptions=function(a){b.Ob(a)&&(this.options=a,this._n(),this._a(this.options));return this};c.prototype.state=function(a,
d,c){var g;if(1===arguments.length)return h.In(this._s,a);if(this._sPipeTarget&&c!==this)return this._sPipeTarget.state(a,d,this),this;if(b.St(a)){"$"===a[0]&&(a=a.slice(1));var f=!!d;if("base"===a)return this;var r=this._as(a,!1);var y=this._ss(r);if(this.state(a)!==f){if(g=this.options.style["$"+a]||this.options.style["@"+a]){var N=this._ps.indexOf(a);r=r.filter(function(a){return function(b){return a._ps.indexOf(b)>N}}(this));
var l=this._ss(r)}if(f)this._s.push(a),g&&this.style(e.clone.keys(g).apply(null,[g].concat(slice.call(l))));else if(h.R(this._s,a),g){var w=e.clone.keys(g).apply(null,[this.options.style.$base].concat(slice.call(y)));g=e.transform(function(){return null}).clone(g);this.style(e(g,w))}}if(this.hS){var k=Object.keys(this.options.sS);k=k.filter(function(b){return h.In(b,a)});r=0;for(l=k.length;r<l;r++){var m=k[r];w=m.split("+");if(g=w.length===
w.filter(function(b){return function(d){return d===a||b.state(d)}}(this)).length)g=this.options.sS[m],f?(h.In(this._sShared,m)||this._sShared.push(m),w=this.options.sS[h.R(w,a).join("+")],this.style(e.clone(w,g))):(h.R(this._sShared,m),w=e.clone.keys(g).apply(null,[this.options.style.$base].concat(slice.call(y))),g=e.transform(function(){return null}).clone(g),this.style(e(g,w)))}}if(this.options.passStateToChildren&&!h.In(this.options.unpassableStates,
a))for(r=this._c,f=0,g=r.length;f<g;f++)y=r[f],y.state(a,d,c||this);return this}};c.prototype.resetState=function(){var a;var b=this._s.slice();var c=0;for(a=b.length;c<a;c++){var e=b[c];this.state(e,!1)}return this};c.prototype.pipeState=function(a){var d;if(a){if(a=h.N(a),b.qE(a)&&a!==this){this._sPipeTarget=a;var c=this._s;var e=0;for(d=c.length;e<d;e++){var f=c[e];a.state(f,!0)}}}else!1===a&&delete this._sPipeTarget;return this};c.prototype.style=
function(){if("text"!==this.type){var a=arguments;if(b.St(a[0])){var d=C(this.el,a[0],a[1]);if(!b.De(a[1]))return this._I?d:d?"":d}else b.Ob(a[0])&&C(this.el,e.allowNull.transform(function(a){return function(b){return"function"===typeof b?b.call(a,a.options.relatedInstance):b}}(this)).clone(a[0]));return this}};c.prototype.styleSafe=function(a,d){if("text"!==this.type){var c=arguments;var e=this.style(a);return b.St(e)?(d&&(e=0),e||this.el.style[c[0]]||this.options.style.$base[c[0]]||
""):this}};c.prototype.styleParsed=function(a){return parseFloat(this.styleSafe(a))};c.prototype._as=function(a,b){null==b&&(b=!0);var d=this._ps.filter(function(b){return function(d){return h.In(b._s,d)&&d!==a}}(this));return b&&this.hS?d.concat(this._sShared):d};c.prototype._ss=function(a){return a.map(function(a){return function(b){return a.options.style["$"+b]||a.options.style["@"+b]}}(this))};Object.defineProperties(c.prototype,
{rect:{get:function(){return this.el.getBoundingClientRect()}},width:{get:function(){return parseFloat(this.style("width"))}},height:{get:function(){return parseFloat(this.style("height"))}},orientation:n={get:function(){return this.width>this.height?"landscape":"portrait"}},aspectRatio:u={get:function(){return this.width/this.height}}});c.prototype.attr=function(a,b){switch(b){case void 0:return this.el.getAttribute(a);case null:return this.el.removeAttribute(a);default:return this.el.setAttribute(a,
b),this}};c.prototype.prop=function(a,b){switch(b){case void 0:return this.el[a];default:return this.el[a]=b,this}};c.prototype.toTemplate=function(){return f.template(this)};c.prototype.clone=function(){var a,b;var g=this.el.cloneNode(!1);g=e.clone(this.options,{existing:g});g=new c(this.type,g);var f=this._s;var h=0;for(b=f.length;h<b;h++){var r=f[h];g.state(r,!0)}f=this.children;h=0;for(b=f.length;h<b;h++)r=f[h],g.append(r.clone());var y=this._e;for(a in y)for(h=y[a],b=0,f=h.length;b<
f;b++)r=h[b],g.on(a,r);return g};c.prototype.append=function(a){var d;a&&(a=h.N(a),b.qE(a)&&((d=a.parent)&&d._r(a),this._c.push(a),this.el.appendChild(a.el),a.parent));return this};c.prototype.appendTo=function(a){a&&(a=h.N(a),b.qE(a)&&a.append(this));return this};c.prototype.prepend=function(a){var d;a&&(a=h.N(a),b.qE(a)&&((d=a.parent)&&d._r(a),this._c.unshift(a),this.el.insertBefore(a.el,this.el.firstChild),
a.parent));return this};c.prototype.prependTo=function(a){a&&(a=h.N(a),b.qE(a)&&a.prepend(this));return this};c.prototype.after=function(a){if(a&&this.parent&&(a=h.N(a),b.qE(a))){var d=this.parent._c.indexOf(this);this.parent._c.splice(d+1,0,a);this.el.parentNode.insertBefore(a.el,this.el.nextSibling);a.parent}return this};c.prototype.insertAfter=function(a){a&&(a=h.N(a),b.qE(a)&&a.after(this));return this};c.prototype.before=
function(a){if(a&&this.parent&&(a=h.N(a),b.qE(a))){var d=this.parent._c.indexOf(this);this.parent._c.splice(d,0,a);this.el.parentNode.insertBefore(a.el,this.el);a.parent}return this};c.prototype.insertBefore=function(a){a&&(a=h.N(a),b.qE(a)&&a.before(this));return this};c.prototype.detach=function(){var a;null!=(a=this.parent)&&a._r(this);return this};c.prototype.remove=function(){var a;this.detach();this.resetState();for(a in this._e)this._e[a].length=
0;return this};c.prototype.empty=function(){var a;var b=this.children.slice();var c=0;for(a=b.length;c<a;c++){var e=b[c];this._r(e)}return this};c.prototype.wrap=function(a){if(a){a=h.N(a);var d=this.parent;b.qE(a)&&a!==this&&a!==this.parent&&(d&&d._r(this,a.parent?void 0:a),a.append(this))}return this};c.prototype.unwrap=function(){var a,b;if(b=this.parent){var c=f.batch(b.children);var e=b.next;if(a=b.parent)b.detach(),e?c.insertBefore(e):c.appendTo(a)}return this};
c.prototype.replace=function(a){var c;a&&(a=h.N(a),b.qE(a)&&a!==this&&(a.detach(),null!=(c=this.parent)&&c._r(this,a)));return this};c.prototype._r=function(a,b){var c=this._c.indexOf(a);-1!==c&&(b?(this.el.replaceChild(b.el,a.el),this._c.splice(c,1,b)):(this.el.removeChild(a.el),this._c.splice(c,1)));return this};Object.defineProperties(c.prototype,{html:{get:function(){return this.el.innerHTML},set:function(a){return this.el.innerHTML=
a}},text:{get:function(){return this.el.textContent},set:function(a){return this.el.textContent=a}}});var t={type:"window",el:window,raw:window,_e:{_R:{}}};t.on=c.prototype.on;t.off=c.prototype.off;t.emit=c.prototype.emit;t._l=c.prototype._l;Object.defineProperties(t,{width:{get:function(){return window.innerWidth}},height:{get:function(){return window.innerHeight}},orientation:n,aspectRatio:u});var E=new function(){var a=[];window.addEventListener("resize",function(){var b;
var c=0;for(b=a.length;c<b;c++){var d=a[c];d()}});this.pQ=function(a,b){var c=b.split("(");var d=c[0];d=function(){switch(d){case "window":return t;case "parent":return a.parent;case "self":return a;default:return a.parentMatching(function(a){return a.ref===d.slice(1)})}}();c=c[1].slice(0,-1).split(L).map(function(a){var b=a.split(":");a=parseFloat(b[1]);isNaN(a)&&(a=b[1]);var c=b[0];var e=c.slice(0,4);b="max-"===e;var g=!b&&"min-"===e;if(b||g)c=c.slice(4);e=function(){switch(c){case "orientation":return function(){return d.orientation};
case "aspect-ratio":return function(){return d.aspectRatio};case "width":case "height":return function(){return d[c]};default:return function(){var a=d.style(c);var b=parseFloat(a);return isNaN(b)?a:b}}}();return{key:c,value:a,min:g,max:b,getter:e}});return{source:d,rules:c}};this.rg=function(c,d){var e;var g=this.pQ(c,d);g.source&&(a.push(e=function(){return b(c,g,d)}),e());return g};var b=function(a,b,c){var d;var e=!0;var g=b.rules;b=0;for(d=g.length;b<d;b++){var f=g[b];var h=f.getter();
e=function(){switch(!1){case !f.min:return h>=f.value;case !f.max:return h<=f.value;default:return h===f.value}}();if(!e)break}return a.state(c,e)};return this};var L=/,\s*/;var f=function(){var a;var d=1<=arguments.length?slice.call(arguments,0):[];switch(!1){case !b.Ar(d[0]):return f.apply(null,d[0]);case !b.template(d[0]):return d[0].spawn();case !b.qE(d[0]):return d[1]?d[0].updateOptions(d[1]):d[0];case !(b.dN(d[0])||b.domDoc(d[0])):if(d[0]._quickElement)return d[0]._quickElement;
var e=d[0].nodeName.toLowerCase().replace("#","");var h=d[1]||{};h.existing=d[0];return new c(e,h);case d[0]!==window:return t;case !b.St(d[0]):e=d[0].toLowerCase();h="text"===e?b.Ob(d[1])?d[1]:{text:d[1]||""}:b.Ob(d[1])?d[1]:{};d=d.slice(2);e=new c(e,h);var l=0;for(a=d.length;l<a;l++)h=d[l],b.St(h)&&(h=f.text(h)),b.template(h)&&(h=f(h)),b.Ar(h)&&(h=f.apply(null,h)),b.qE(h)&&h.appendTo(e);return e}};f.template=function(a){return new v(a,!0)};var z=function(a,b){this.elements=
a;this.rR=b;this.elements=this.elements.map(function(a){return f(a)});return this};z.prototype.reverse=function(){this.elements=this.elements.reverse();return this};z.prototype["return"]=function(a){return a?(this.rR=!0,this):this.lR};Object.keys(c.prototype).concat("css","replaceWith","html","text").forEach(function(a){return z.prototype[a]=function(b){var c;var d=this.lR=function(){var d;var e=this.elements;var f=[];var g=0;for(d=e.length;g<d;g++)c=e[g],"html"===
a||"text"===a?b?f.push(c[a]=b):f.push(c[a]):f.push(c[a].apply(c,arguments));return f}.apply(this,arguments);return this.rR?d:this}});f.batch=function(a,c){if(!b.iT(a))throw Error("Batch: expected an iT, got "+String(a));if(!a.length)throw Error("Batch: expected a non-empty element collection");return new z(a,c)};var l=function(a,c,f){var d,g,h,l;f&&(d={options:function(a){return e(a,f)}});b.Ar(c)&&(c=G(c,!1));d=e.deep.notKeys("children").notDeep("relatedInstance").transform(d).clone(a,
c);a=a.children;c=(null!=c?c.children:void 0)||[];d.children=[];if(b.Ar(c)){var k=g=0;for(l=Math.max(a.length,c.length);0<=l?g<l:g>l;k=0<=l?++g:--g){var m=h=!1;var p=a[k];var n=c[k];k=function(){switch(!1){case !b.template(n):return n;case !b.Ar(n):return m=G(n,!1);case !b.St(n):return m={type:"text",options:{text:n}};case !(!n&&!f):return h=!0;default:return m=n||!0}}();h?k=p:m&&(k=p?p.extend(k,f):new v(e.deep.clone(D,k)));d.children.push(k)}}else if(b.Ob(c))for(p in d.children=F(c,
a,f),c)n=c[p],k=b.ObPlain(k)?n:G(n),d.children.push(new v(e.deep.clone(D,k))),delete c[p];return d};var F=function(a,b,c){var d,e;if(b.length){var f=[];var g=0;for(d=b.length;g<d;g++){var h=b[g];(e=a[h.ref])?(e=h.extend(e,c),delete a[h.ref]):e=c?h.extend(null,c):h;e._config.children=F(a,e.children);f.push(e)}return f}return b};var G=function(a,c){switch(!1){case !b.Ar(a):var d={};if(b.St(a[0]))d.type=a[0];else throw Error(H+" string for 'type', got '"+String(a[0])+"'");if(1<a.length&&!b.Ob(a[1])&&
null!==a[1])throw Error(H+" object for 'options', got '"+String(a[1])+"'");d.options=a[1]?e.deep.clone(a[1]):null;a[1]&&(d.ref=a[1].id||a[1].ref);d.children=a.slice(2);!1===c?3===a.length&&b.ObPlain(a[2])&&!b.template(a[2])&&(d.children=a[2]):d.children=d.children.map(f.template);return d;case !(b.St(a)||b.dT(a)):return{type:"text",options:{text:a.textContent||a},children:D.children};case !b.dE(a):return{type:a.nodeName.toLowerCase(),ref:a.id,options:e.clone.keys(k)(a),children:D.children.map.call(a.childNodes,
f.template)};case !b.qE(a):return{type:a.type,ref:a.ref,options:e.clone.deep.notKeys("relatedInstance")(a.options),children:a.children.map(f.template)};case !b.template(a):return l(a._config);default:throw Error(H+" (array || string || dE || qE || template), got "+String(a));}};var H="Template Parse Error: expected";var D={type:"div",ref:void 0,options:{},children:[]};var v=function(){function a(a,b){this._config=b?G(a):a}a.prototype.spawn=function(a,b){if(a||b)var c=l(this._config,
a,b);else c=e.clone(this._config),c.options=e.deepOnly("style").clone(c.options);return f.apply(null,[c.type,c.options].concat(slice.call(c.children)))};a.prototype.extend=function(b,c){return new a(l(this._config,b,c))};return a}();null==v.name&&(v.name="QuickTemplate");Object.keys(D).forEach(function(a){return Object.defineProperty(v.prototype,a,{get:function(){return this._config[a]}})});Object.defineProperty(v.prototype,"child",{get:function(){return this._C||A(this)}});var m="link:a anchor:a a text div span h1 h2 h3 h4 h5 h6 header footer section button br ul ol li fieldset input textarea select option form frame hr iframe img picture main nav meta object pre style table tbody th tr td tfoot video".split(" ");
u=function(a){var b;var c=b=a;h.In(a,":")&&(a=a.split(":"),c=a[0],b=a[1]);return f[c]=function(){return f.apply(null,[b].concat(slice.call(arguments)))}};n=0;for(I=m.length;n<I;n++){var M=m[n];u(M)}f.version="1.0.31";return null!=("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=f:"function"===typeof define&&define.amd?define(["quickdom"],function(){return f}):this.Dom=f}()}})(this)();
