var slice=[].slice;
(function(O){return function(){var z;z=function(C,b,z,D){D=function(f){return z[f]?b[f]:(z[f]=1,b[f]={},b[f]=C[f](b[f]))};C[1]=function(b){var c={exports:b};(function(){var b,f,t,F,y,G,A,B;F=["webkit","moz","ms","o"];G="backgroundPositionX backgroundPositionY blockSize borderWidth columnRuleWidth cx cy fontSize gridColumnGap gridRowGap height inlineSize lineHeight minBlockSize minHeight minInlineSize minWidth maxHeight maxWidth outlineOffset outlineWidth perspective shapeMargin strokeDashoffset strokeWidth textIndent width wordSpacing top bottom left right x y".split(" ");["margin",
"padding","border","borderRadius"].forEach(function(b){var c,h,e,l,f;G.push(b);l=["Top","Bottom","Left","Right"];f=[];h=0;for(e=l.length;h<e;h++)c=l[h],f.push(G.push(b+c));return f});B=document.createElement("div").style;b=/^\d+(?:[a-z]|\%)+$/i;f=/\d+$/;t=/\s/;A={In:function(b,c){return b&&-1!==b.indexOf(c)},isIterable:function(b){return b&&"object"===typeof b&&"number"===typeof b.length&&!b.nodeType},isPropSupported:function(b){return"undefined"!==typeof B[b]},toTitleCase:function(b){return b[0].toUpperCase()+
b.slice(1)},normalizeProperty:function(b){var c,h,e;if(this.isPropSupported(b))return b;e=this.toTitleCase(b);b=0;for(c=F.length;b<c;b++)if(h=F[b],h=""+h+e,this.isPropSupported(h))return h},normalizeValue:function(c,u){this.In(G,c)&&null!==u&&(u=""+u,!f.test(u)||b.test(u)||t.test(u)||(u+="px"));return u}};y=function(b,c,f){var e,l,h;if(A.isIterable(b))for(e=0,l=b.length;e<l;e++)h=b[e],y(h,c,f);else if("object"===typeof c)for(e in c)f=c[e],y(b,e,f);else{c=A.normalizeProperty(c);if("undefined"===
typeof f)return getComputedStyle(b)[c];c&&(b.style[c]=A.normalizeValue(c,f))}};y.version="1.0.5";return null!=("undefined"!==typeof c&&null!==c?c.exports:void 0)?c.exports=y:"function"===typeof define&&define.amd?define(["quickdom"],function(){return y}):this.Css=y})();return c.exports};C[2]=function(b){var c={exports:b};(function(b){return function(){var b;b=function(b,c,f,p){p=function(p){return f[p]?c[p]:(f[p]=1,c[p]={},c[p]=b[p](c[p]))};b[1]=function(b){var c,f,u,t,e;f=p(2);e=function(b){var c,
e,l;e={};for(c in b)l=b[c],e[c]=l;return e};t=function(b){if(b)return"object"!==typeof b||Array.isArray(b)?[].concat(b):Object.keys(b)};c=function(b){var c;c=b.target?function(){for(var b=arguments.length,e=-1,l=Array(b);++e<b;)l[e]=arguments[e];return f(c.options,c.options.target,l)}:function(b){for(var e=arguments.length,l=0,h=Array(e);++l<e;)h[l]=arguments[l];return f(c.options,b,h)};c.options=b;Object.defineProperties(c,u);return c};u={deep:{get:function(){var b;b=e(this.options);b.deep=!0;return c(b)}},
own:{get:function(){var b;b=e(this.options);b.own=!0;return c(b)}},allowNull:{get:function(){var b;b=e(this.options);b.allowNull=!0;return c(b)}},concat:{get:function(){var b;b=e(this.options);b.concat=!0;return c(b)}},clone:{get:function(){var b;b=e(this.options);b.target={};return c(b)}},notDeep:{get:function(){var b;b=e(this.options);return function(e){b.notDeep=t(e);return c(b)}}},keys:{get:function(){var b;b=e(this.options);return function(e){b.keys=t(e);return c(b)}}},notKeys:{get:function(){var b;
b=e(this.options);return function(e){b.notKeys=t(e);return c(b)}}},transform:{get:function(){var b;b=e(this.options);return function(e){"function"===typeof e?b.globalTransform=e:e&&"object"===typeof e&&(b.transforms=e);return c(b)}}},filter:{get:function(){var b;b=e(this.options);return function(e){"function"===typeof e?b.globalFilter=e:e&&"object"===typeof e&&(b.filters=e);return c(b)}}}};return c({})};b[2]=function(b){var c,f,p,t;f=function(b){return Array.isArray(b)};p=function(b){return b&&"[object Object]"===
Object.prototype.toString.call(b)||f(b)};t=function(b,c){return c.notDeep?-1!==c.notDeep.indexOf(b):!1};return c=function(b,h,u){var e,q,l,v,m,x;if(!h||"object"!==typeof h&&"function"!==typeof h)h={};e=0;for(l=u.length;e<l;e++)if(v=u[e],null!=v)for(q in v)if(m=v[q],x=h[q],!(m===h||void 0===m||null===m&&!b.allowNull||b.keys&&-1===b.keys.indexOf(q)||b.notKeys&&-1!==b.notKeys.indexOf(q)||b.own&&!v.hasOwnProperty(q)||b.globalFilter&&!b.globalFilter(m,q,v)||b.filters&&b.filters[q]&&!b.filters[q](m,q,v)))switch(b.globalTransform&&
(m=b.globalTransform(m,q,v)),b.transforms&&b.transforms[q]&&(m=b.transforms[q](m,q,v)),!1){case !(b.concat&&f(m)&&f(x)):h[q]=x.concat(m);break;case !(b.deep&&p(m)&&!t(q,b)):x=p(x)?x:f(m)?[]:{};h[q]=c(b,x,[m]);break;default:h[q]=m}return h}};return p};b=b({},{},{});return function(){var f;f=b(1);null!=("undefined"!==typeof c&&null!==c?c.exports:void 0)?c.exports=f:"function"===typeof define&&define.amd?define(["smart-extend"],function(){return f}):window.extend=f}()}})(this)();return c.exports};C[22]=
function(b){var c;return c=b={De:function(b){return void 0!==b},Ar:function(b){return b instanceof Array},Ob:function(b){return"object"===typeof b&&b},objectPlain:function(b){return c.Ob(b)&&"[object Object]"===Object.prototype.toString.call(b)},St:function(b){return"string"===typeof b},Nu:function(b){return"number"===typeof b},"function":function(b){return"function"===typeof b},iT:function(b){return c.Ob(b)&&c.Nu(b.length)}}};return D};z=z({},{},{});return function(){var C,
b,M,D,f,c,p,E,t,F,y,G,A,B,h,u,H,e,l,N,I,q,K,v,m,x;C=z(1);h=z(2);G="id name type href selected checked className".split(" ");y="id ref type name text style class className url href selected checked props attrs passStateToChildren stateTriggers".split(" ");e={In:function(a,b){return a&&-1!==a.indexOf(b)},R:function(a,b){var d;d=a.indexOf(b);-1!==d&&a.splice(d,1);return a},N:function(a){switch(!1){case !b.dN(a):return f(a);case !b.St(a):return f.text(a);default:return a}},
isStateStyle:function(a){return"$"===a[0]||"@"===a[0]}};b=z(22);b=h.clone(b,{domDoc:function(a){return a&&9===a.nodeType},dE:function(a){return a&&1===a.nodeType},dT:function(a){return a&&3===a.nodeType},dN:function(a){return b.dE(a)||b.dT(a)},qE:function(a){return a&&"QuickElement"===a.constructor.name},template:function(a){return a&&"QuickTemplate"===a.constructor.name}});c=function(){function a(a,b){this.type=a;this.options=b;this.el=this.options.existing||("text"===
this.type?document.createTextNode(this.options.text):"*"===this.type[0]?document.createElementNS("http://www.w3.org/2000/svg",this.type.slice(1)):document.createElement(this.type));"text"===this.type&&(this.append=this.prepend=this.attr=function(){});this._p=null;this._s=[];this._c=[];this._i=[];this._e={_R:{}};this._n();this._a();this._ae();this._pp();this.el._quickElement=this}a.prototype.toJSON=function(){var a,
b,k,c,e;e=[this.type,h.clone.keys(y)(this.options)];b=this.children;k=0;for(c=b.length;k<c;k++)a=b[k],e.push(a.toJSON());return e};return a}();null==c.name&&(c.name="QuickElement");Object.defineProperties(c.prototype,{raw:{get:function(){return this.el}},0:{get:function(){return this.el}},css:{get:function(){return this.style}},replaceWith:{get:function(){return this.replace}}});c.prototype.parentsUntil=function(a){return F(this,a)};c.prototype.parentMatching=function(a){var d;if(b["function"](a))for(d=
this.parent;d;){if(a(d))return d;d=d.parent}};Object.defineProperties(c.prototype,{children:{get:function(){var a,b,g,c;if(this.el.childNodes.length!==this._c.length)for(this._c.length=0,c=this.el.childNodes,b=0,g=c.length;b<g;b++)a=c[b],4>a.nodeType&&this._c.push(f(a));return this._c}},parent:{get:function(){this._p&&this._p.el===this.el.parentNode||b.domDoc(this.el.parentNode)||(this._p=f(this.el.parentNode));return this._p}},parents:{get:function(){return F(this)}},
next:{get:function(){return f(this.el.nextSibling)}},prev:{get:function(){return f(this.el.previousSibling)}},nextAll:{get:function(){var a,b;b=[];for(a=f(this.el.nextSibling);a;)b.push(a),a=a.next;return b}},prevAll:{get:function(){var a,b;b=[];for(a=f(this.el.previousSibling);a;)b.push(a),a=a.prev;return b}},siblings:{get:function(){return this.prevAll.reverse().concat(this.nextAll)}},child:{get:function(){return this._C||t(this)}},childf:{get:function(){return t(this,!0)}}});F=function(a,
d){var g,c;b["function"](d)||(d=void 0);c=[];for(g=a.parent;g;)c.push(g),g=g.parent,d&&d(g)&&(g=null);return c};t=function(a,b){var d;if(b||!a._C)a._C={};d=a._C;a.ref&&(d[a.ref]=a);d=a.children;d.length&&h.apply(null,[a._C].concat(slice.call(d.map(function(a){return t(a,b)}))));return a._C};c.prototype._n=function(){var a;null==(a=this.options).style&&(a.style={});this.options.sS={};this.options["class"]&&(this.options.className=this.options["class"]);
this.options.url&&(this.options.href=this.options.url);null==(a=this.options).relatedInstance&&(a.relatedInstance=this);null==(a=this.options).unpassableStates&&(a.unpassableStates=[]);null==(a=this.options).passStateToChildren&&(a.passStateToChildren=!0);this.options.stateTriggers=h.deep({hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focus",off:"blur"}},this.options.stateTriggers);this._ns()};c.prototype._ns=function(){var a,b,g,c,r;b=Object.keys(this.options.style);
g=b.filter(function(a){return e.isStateStyle(a)});c=e.R(g.slice(),"$base");this._m=g.filter(function(a){return"@"===a[0]});this._ps=g.map(function(a){return a.slice(1)});!e.In(g,"$base")&&b.length&&(this.options=h.clone(this.options),g.length?(b=b.filter(function(a){return!e.isStateStyle(a)}),this.options.style.$base=h.clone.keys(b)(this.options.style)):this.options.style={$base:this.options.style});a=function(b){return function(d,g){var c,k,r,f,L,n;r=Object.keys(d).filter(function(a){return e.isStateStyle(a)});
if(r.length)for(b.hS=!0,null==b._sShared&&(b._sShared=[]),c=0,f=r.length;c<f;c++)k=r[c],L=g.concat(k.slice(1)),n=L.join("+"),b.options.sS[n]=b.options.style["$"+n]=d[k],a(d[k],L),delete d[k]}}(this);b=0;for(g=c.length;b<g;b++)r=c[b],a(this.options.style[r],[r.slice(1)])};c.prototype._a=function(){var a,b,g;(b=this.options.id||this.options.ref)&&this.attr("data-ref",this.ref=b);this.options.id&&(this.el.id=this.options.id);this.options.className&&(this.el.className=
this.options.className);this.options.src&&(this.el.src=this.options.src);this.options.href&&(this.el.href=this.options.href);this.options.type&&(this.el.type=this.options.type);this.options.name&&(this.el.name=this.options.name);this.options.value&&(this.el.value=this.options.value);this.options.selected&&(this.el.selected=this.options.selected);this.options.checked&&(this.el.checked=this.options.checked);if(this.options.props)for(a in g=this.options.props,g)b=g[a],this.prop(a,b);if(this.options.attrs)for(a in g=
this.options.attrs,g)b=g[a],this.attr(a,b);this.options.styleAfterInsert||this.style(this.options.style.$base);this.onInserted(function(a){return function(){var b,d;a.options.styleAfterInsert&&a.style(h.clone.apply(h,[a.options.style.$base].concat(slice.call(a._ss(a._as())))));b=a._I=a;d=a._m;if(d.length)return a._m=new function(){var a,g,c;a=0;for(g=d.length;a<g;a++)c=d[a],c=c.slice(1),this[c]=M.rg(b,c);return this}}}(this))};c.prototype._ae=
function(){var a,d,g,c;d=this.options.stateTriggers;a=function(a){return function(d,g){var c,k;k=b.St(g)?g:g.on;b.Ob(g)&&(c=g.off);a._l(k,function(){return a.state(d,!0)});if(c)return a._l(c,function(){return a.state(d,!1)})}}(this);for(g in d)c=d[g],a(g,c)};c.prototype._pp=function(){var a;a=void 0;return Object.defineProperty(this,"_p",{get:function(){return a},set:function(b){var d;if(a=b)if(d=this.parents.slice(-1)[0],d.raw===document.documentElement)this._up(b);
else a.onInserted(function(d){return function(){if(a===b)return d._up(b)}}(this))}})};c.prototype._up=function(a){var b,c,k;delete this._p;this._p=a;k=this._i;b=0;for(c=k.length;b<c;b++)a=k[b],a(this)};K=/\s+/;c.prototype.on=function(a,d){var c,k;b.St(a)&&b["function"](d)&&(k=a.split("."),c=k[1],a=k[0],a.split(K).forEach(function(a){return function(b){a._e[b]||(a._e[b]=[],a._l(b,function(d){var c,g,k,e;e=a._e[b];
g=0;for(k=e.length;g<k;g++)c=e[g],c.call(a.el,d)}));c&&(a._e._R[c]=d);return a._e[b].push(d)}}(this)));return this};c.prototype.off=function(a,d){var c,k;if(b.St(a))k=a.split("."),c=k[1],a=k[0],a.split(K).forEach(function(a){return function(g){if(a._e[g]){null==d&&(d=a._e._R[c]);if(b["function"](d))return e.R(a._e[g],d);if(!c)return a._e[g].length=0}}}(this));else for(k in this._e)this.off(k);
return this};c.prototype.emit=function(a,d,c){var g;null==d&&(d=!0);null==c&&(c=!0);a&&b.St(a)&&(g=document.createEvent("Event"),g.initEvent(a,d,c),this.el.dispatchEvent(g));return this};c.prototype.onInserted=function(a,d){null==d&&(d=!0);if(b["function"](a))return this._I?d&&a(this):this._i.push(a),this};c.prototype._l=function(a,b){this.el[this.el.addEventListener?"addEventListener":"attachEvent"](this.el.addEventListener?a:"on"+a,b);return this};c.prototype.updateOptions=
function(a){b.Ob(a)&&(this.options=a,this._n(),this._a(this.options));return this};c.prototype.state=function(a,d,c){var g,r,f,n,w,J,l,p,q;if(1===arguments.length)return e.In(this._s,a);if(this._sPipeTarget&&c!==this)return this._sPipeTarget.state(a,d,this),this;if(b.St(a)){"$"===a[0]&&(a=a.slice(1));f=!!d;if("base"===a)return this;r=this._as(a,!1);g=this._ss(r);if(this.state(a)!==f){if(w=this.options.style["$"+a]||this.options.style["@"+
a])q=this._ps.indexOf(a),r=r.filter(function(a){return function(b){return a._ps.indexOf(b)>q}}(this)),J=this._ss(r);f?(this._s.push(a),w&&this.style(h.clone.keys(w).apply(null,[w].concat(slice.call(J))))):(e.R(this._s,a),w&&(n=h.clone.keys(w).apply(null,[this.options.style.$base].concat(slice.call(g))),w=h.transform(function(){return null}).clone(w),this.style(h(w,n))))}if(this.hS)for(l=Object.keys(this.options.sS),l=l.filter(function(b){return e.In(b,
a)}),r=0,J=l.length;r<J;r++)if(p=l[r],n=p.split("+"),w=n.length===n.filter(function(b){return function(d){return d===a||b.state(d)}}(this)).length)w=this.options.sS[p],f?(e.In(this._sShared,p)||this._sShared.push(p),n=this.options.sS[e.R(n,a).join("+")],this.style(h.clone(n,w))):(e.R(this._sShared,p),n=h.clone.keys(w).apply(null,[this.options.style.$base].concat(slice.call(g))),w=h.transform(function(){return null}).clone(w),this.style(h(w,n)));
if(this.options.passStateToChildren&&!e.In(this.options.unpassableStates,a))for(r=this._c,f=0,w=r.length;f<w;f++)g=r[f],g.state(a,d,c||this);return this}};c.prototype.resetState=function(){var a,b,c,k;k=this._s.slice();b=0;for(c=k.length;b<c;b++)a=k[b],this.state(a,!1);return this};c.prototype.pipeState=function(a){var d,c,k,f;if(a){if(a=e.N(a),b.qE(a)&&a!==this)for(this._sPipeTarget=a,f=this._s,c=0,k=f.length;c<k;c++)d=f[c],a.state(d,!0)}else!1===a&&
delete this._sPipeTarget;return this};c.prototype.style=function(){var a,d;if("text"!==this.type){a=arguments;if(b.St(a[0])){if(d=C(this.el,a[0],a[1]),!b.De(a[1]))return this._I?d:d?"":d}else b.Ob(a[0])&&C(this.el,h.allowNull.transform(function(a){return function(b){return"function"===typeof b?b.call(a,a.options.relatedInstance):b}}(this)).clone(a[0]));return this}};c.prototype.styleSafe=function(a,d){var c,k;if("text"!==this.type)return c=arguments,k=this.style(a),b.St(k)?
(d&&(k=0),k||this.el.style[c[0]]||this.options.style.$base[c[0]]||""):this};c.prototype.styleParsed=function(a){return parseFloat(this.styleSafe(a))};c.prototype._as=function(a,b){var d;null==b&&(b=!0);d=this._ps.filter(function(b){return function(d){return e.In(b._s,d)&&d!==a}}(this));return b&&this.hS?d.concat(this._sShared):d};c.prototype._ss=function(a){return a.map(function(a){return function(b){return a.options.style["$"+b]||
a.options.style["@"+b]}}(this))};Object.defineProperties(c.prototype,{rect:{get:function(){return this.el.getBoundingClientRect()}},width:{get:function(){return parseFloat(this.style("width"))}},height:{get:function(){return parseFloat(this.style("height"))}},orientation:l={get:function(){return this.width>this.height?"landscape":"portrait"}},aspectRatio:A={get:function(){return this.width/this.height}}});c.prototype.attr=function(a,b){switch(b){case void 0:return this.el.getAttribute(a);case null:return this.el.removeAttribute(a);
default:return this.el.setAttribute(a,b),this}};c.prototype.prop=function(a,b){switch(b){case void 0:return this.el[a];default:return this.el[a]=b,this}};c.prototype.toTemplate=function(){return f.template(this)};c.prototype.clone=function(){var a,b,g,k,e,f,n;g=this.el.cloneNode(!1);g=h.clone(this.options,{existing:g});g=new c(this.type,g);f=this._s;b=0;for(e=f.length;b<e;b++)a=f[b],g.state(a,!0);f=this.children;b=0;for(e=f.length;b<e;b++)a=f[b],g.append(a.clone());n=this._e;for(k in n)for(b=
n[k],e=0,f=b.length;e<f;e++)a=b[e],g.on(k,a);return g};c.prototype.append=function(a){var c;a&&(a=e.N(a),b.qE(a)&&((c=a.parent)&&c._r(a),this._c.push(a),this.el.appendChild(a.el),a.parent));return this};c.prototype.appendTo=function(a){a&&(a=e.N(a),b.qE(a)&&a.append(this));return this};c.prototype.prepend=function(a){var c;a&&(a=e.N(a),b.qE(a)&&((c=a.parent)&&c._r(a),this._c.unshift(a),this.el.insertBefore(a.el,
this.el.firstChild),a.parent));return this};c.prototype.prependTo=function(a){a&&(a=e.N(a),b.qE(a)&&a.prepend(this));return this};c.prototype.after=function(a){var c;a&&this.parent&&(a=e.N(a),b.qE(a)&&(c=this.parent._c.indexOf(this),this.parent._c.splice(c+1,0,a),this.el.parentNode.insertBefore(a.el,this.el.nextSibling),a.parent));return this};c.prototype.insertAfter=function(a){a&&(a=e.N(a),b.qE(a)&&a.after(this));
return this};c.prototype.before=function(a){var c;a&&this.parent&&(a=e.N(a),b.qE(a)&&(c=this.parent._c.indexOf(this),this.parent._c.splice(c,0,a),this.el.parentNode.insertBefore(a.el,this.el),a.parent));return this};c.prototype.insertBefore=function(a){a&&(a=e.N(a),b.qE(a)&&a.before(this));return this};c.prototype.detach=function(){var a;null!=(a=this.parent)&&a._r(this);return this};c.prototype.remove=function(){var a;this.detach();
this.resetState();for(a in this._e)this._e[a].length=0;return this};c.prototype.empty=function(){var a,b,c,e;e=this.children.slice();b=0;for(c=e.length;b<c;b++)a=e[b],this._r(a);return this};c.prototype.wrap=function(a){var c;a&&(a=e.N(a),c=this.parent,b.qE(a)&&a!==this&&a!==this.parent&&(c&&c._r(this,a.parent?void 0:a),a.append(this)));return this};c.prototype.unwrap=function(){var a,b,c,e;if(b=this.parent)if(c=f.batch(b.children),
e=b.next,a=b.parent)b.detach(),e?c.insertBefore(e):c.appendTo(a);return this};c.prototype.replace=function(a){var c;a&&(a=e.N(a),b.qE(a)&&a!==this&&(a.detach(),null!=(c=this.parent)&&c._r(this,a)));return this};c.prototype._r=function(a,b){var c;c=this._c.indexOf(a);-1!==c&&(b?(this.el.replaceChild(b.el,a.el),this._c.splice(c,1,b)):(this.el.removeChild(a.el),this._c.splice(c,1)));return this};Object.defineProperties(c.prototype,{html:{get:function(){return this.el.innerHTML},
set:function(a){return this.el.innerHTML=a}},text:{get:function(){return this.el.textContent},set:function(a){return this.el.textContent=a}}});E={type:"window",el:window,raw:window,_e:{_R:{}}};E.on=c.prototype.on;E.off=c.prototype.off;E.emit=c.prototype.emit;E._l=c.prototype._l;Object.defineProperties(E,{width:{get:function(){return window.innerWidth}},height:{get:function(){return window.innerHeight}},orientation:l,aspectRatio:A});M=new function(){var a,b;a=[];window.addEventListener("resize",
function(){var b,c,d;c=0;for(d=a.length;c<d;c++)b=a[c],b()});this.pQ=function(a,b){var c,d;c=b.split("(");d=c[0];d=function(){switch(d){case "window":return E;case "parent":return a.parent;case "self":return a;default:return a.parentMatching(function(a){return a.ref===d.slice(1)})}}();c=c[1].slice(0,-1).split(v).map(function(a){var b,c,g,e;g=a.split(":");a=parseFloat(g[1]);isNaN(a)&&(a=g[1]);c=g[0];b=c.slice(0,4);g="max-"===b;e=!g&&"min-"===b;if(g||e)c=c.slice(4);b=function(){switch(c){case "orientation":return function(){return d.orientation};
case "aspect-ratio":return function(){return d.aspectRatio};case "width":case "height":return function(){return d[c]};default:return function(){var a,b;b=d.style(c);a=parseFloat(b);return isNaN(a)?b:a}}}();return{key:c,value:a,min:e,max:g,getter:b}});return{source:d,rules:c}};this.rg=function(c,d){var g,e;e=this.pQ(c,d);e.source&&(a.push(g=function(){return b(c,e,d)}),g());return e};b=function(a,b,c){var d,g,e,f,k;e=!0;f=b.rules;b=0;for(g=f.length;b<g&&(k=f[b],d=k.getter(),e=function(){switch(!1){case !k.min:return d>=
k.value;case !k.max:return d<=k.value;default:return d===k.value}}(),e);b++);return a.state(c,e)};return this};v=/,\s*/;f=function(){var a,d,g,e,h;a=1<=arguments.length?slice.call(arguments,0):[];switch(!1){case !b.Ar(a[0]):return f.apply(null,a[0]);case !b.template(a[0]):return a[0].spawn();case !b.qE(a[0]):return a[1]?a[0].updateOptions(a[1]):a[0];case !(b.dN(a[0])||b.domDoc(a[0])):if(a[0]._quickElement)return a[0]._quickElement;g=a[0].nodeName.toLowerCase().replace("#","");d=a[1]||
{};d.existing=a[0];return new c(g,d);case a[0]!==window:return E;case !b.St(a[0]):g=a[0].toLowerCase();d="text"===g?b.Ob(a[1])?a[1]:{text:a[1]||""}:b.Ob(a[1])?a[1]:{};a=a.slice(2);g=new c(g,d);e=0;for(h=a.length;e<h;e++)d=a[e],b.St(d)&&(d=f.text(d)),b.template(d)&&(d=f(d)),b.Ar(d)&&(d=f.apply(null,d)),b.qE(d)&&d.appendTo(g);return g}};f.template=function(a){return new p(a,!0)};D=function(a,b){this.elements=a;this.rR=b;this.elements=this.elements.map(function(a){return f(a)});
return this};D.prototype.reverse=function(){this.elements=this.elements.reverse();return this};D.prototype["return"]=function(a){return a?(this.rR=!0,this):this.lR};Object.keys(c.prototype).concat("css","replaceWith","html","text").forEach(function(a){return D.prototype[a]=function(b){var c,d;d=this.lR=function(){var d,e,g,f;g=this.elements;f=[];d=0;for(e=g.length;d<e;d++)c=g[d],"html"===a||"text"===a?b?f.push(c[a]=b):f.push(c[a]):f.push(c[a].apply(c,arguments));return f}.apply(this,
arguments);return this.rR?d:this}});f.batch=function(a,c){if(!b.iT(a))throw Error("Batch: expected an iT, got "+String(a));if(!a.length)throw Error("Batch: expected a non-empty element collection");return new D(a,c)};H=function(a,c,e){var d,g,f,n,l,m,t,v;e&&(g={options:function(a){return h(a,e)}});b.Ar(c)&&(c=q(c,!1));g=h.deep.notKeys("children").notDeep("relatedInstance").transform(g).clone(a,c);a=a.children;c=(null!=c?c.children:void 0)||[];g.children=[];if(b.Ar(c))for(n=
f=0,v=Math.max(a.length,c.length);0<=v?f<v:f>v;n=0<=v?++f:--f)l=t=!1,d=a[n],m=c[n],n=function(){switch(!1){case !b.template(m):return m;case !b.Ar(m):return l=q(m,!1);case !b.St(m):return l={type:"text",options:{text:m}};case !(!m&&!e):return t=!0;default:return l=m||!0}}(),t?n=d:l&&(n=d?d.extend(n,e):new p(h.deep.clone(B,n))),g.children.push(n);else if(b.Ob(c))for(d in g.children=u(c,a,e),c)m=c[d],n=b.ObPlain(n)?m:q(m),g.children.push(new p(h.deep.clone(B,n))),delete c[d];return g};
u=function(a,b,c){var d,e,g,f,h;if(b.length){h=[];e=0;for(g=b.length;e<g;e++)d=b[e],(f=a[d.ref])?(f=d.extend(f,c),delete a[d.ref]):f=c?d.extend(null,c):d,f._config.children=u(a,f.children),h.push(f);return h}return b};q=function(a,c){var d;switch(!1){case !b.Ar(a):d={};if(b.St(a[0]))d.type=a[0];else throw Error(I+" string for 'type', got '"+String(a[0])+"'");if(1<a.length&&!b.Ob(a[1])&&null!==a[1])throw Error(I+" object for 'options', got '"+String(a[1])+"'");d.options=a[1]?h.deep.clone(a[1]):
null;a[1]&&(d.ref=a[1].id||a[1].ref);d.children=a.slice(2);!1===c?3===a.length&&b.ObPlain(a[2])&&!b.template(a[2])&&(d.children=a[2]):d.children=d.children.map(f.template);return d;case !(b.St(a)||b.dT(a)):return{type:"text",options:{text:a.textContent||a},children:B.children};case !b.dE(a):return{type:a.nodeName.toLowerCase(),ref:a.id,options:h.clone.keys(G)(a),children:B.children.map.call(a.childNodes,f.template)};case !b.qE(a):return{type:a.type,ref:a.ref,options:h.clone.deep.notKeys("relatedInstance")(a.options),
children:a.children.map(f.template)};case !b.template(a):return H(a._config);default:throw Error(I+" (array || string || dE || qE || template), got "+String(a));}};I="Template Parse Error: expected";B={type:"div",ref:void 0,options:{},children:[]};p=function(){function a(a,b){this._config=b?q(a):a}a.prototype.spawn=function(a,b){var c;c=a||b?H(this._config,a,b):this._config;return f.apply(null,[c.type,c.options].concat(slice.call(c.children)))};a.prototype.extend=function(b,c){return new a(H(this._config,
b,c))};return a}();null==p.name&&(p.name="QuickTemplate");Object.keys(B).forEach(function(a){return Object.defineProperty(p.prototype,a,{get:function(){return this._config[a]}})});Object.defineProperty(p.prototype,"child",{get:function(){return this._C||t(this)}});x="link:a anchor:a a text div span h1 h2 h3 h4 h5 h6 header footer section button br ul ol li fieldset input textarea select option form frame hr iframe img picture main nav meta object pre style table tbody th tr td tfoot video".split(" ");
A=function(a){var b,c;b=c=a;e.In(a,":")&&(a=a.split(":"),b=a[0],c=a[1]);return f[b]=function(){return f.apply(null,[c].concat(slice.call(arguments)))}};l=0;for(N=x.length;l<N;l++)m=x[l],A(m);f.version="1.0.30";return null!=("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=f:"function"===typeof define&&define.amd?define(["quickdom"],function(){return f}):this.Dom=f}()}})(this)();
